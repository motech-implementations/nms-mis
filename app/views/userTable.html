<div ng-controller="UserTableController" class='userTable'>

	<div class="block header">
		<div class='block inputs row'>
			<h1 class='col-sm-6'>User Management</h1>
			<input  class="form-control input input-sm" ng-model="filterText" type="text" name="tableSearch" placeholder="Search">
			<button class="btn btn-sm btn-primary" name="bulkUpload" ui-sref="userManagement.bulkUpload">Upload Bulk Users</button>
			<button class="btn btn-sm btn-primary" name="newUser" ui-sref="userManagement.createUser">Create new User</button>
		</div>
	</div>

	<div>
		<button class="btn btn-sm btn-primary resetButton" ng-click="resetFilters()">Reset Filters</button>
		<table class="table table-bordered">
			<tr>
				<!-- <th ng-repeat="header in headers" ng-if="header != '$$hashKey'">{{header}}</th> -->
				<th ng-click="sort_by('id')"><a>Id</a></th>
				<th ng-click="sort_by('name')"><a>Name</a></th>
				<th ng-click="sort_by('username')"><a>Username</a></th>
				<th ng-click="sort_by('phoneNumber')"><a>Phone no.</a></th>
				<th ng-click="sort_by('email')"><a>Email id</a></th>
				<th class="th-dropdown">
					<span uib-dropdown>
						<a href id="accessTypeDropdown" uib-dropdown-toggle ng-if="!exists(accType)">Access Type
							<span class="caret" ng-if="!exists(accType)"></span>
						</a>
						<a href id="accessTypeDropdown" uib-dropdown-toggle ng-if="exists(accType)">{{accType}}
							<span class="caret" ng-if="exists(accType)"></span>
						</a>
						<ul class="dropdown-menu" uib-dropdown-menu aria-labelledby="accessTypeDropdown">
							<li><a ng-click="setUniqueAccessTypes('')">Access Type</a></li>
							<li ng-repeat="aType in uniqueAT = (getUniqueAccessTypes())">
								<a ng-click="setUniqueAccessTypes(aType)" >{{aType}}</a>
							</li>
						</ul>
					</span>
				</th>
				<!--<th>Access Type</th>-->
				<th class="th-dropdown">
					<span uib-dropdown>
						<a href id="accessLevelDropdown" uib-dropdown-toggle ng-if="!exists(accLevel)">Access Level
							<span class="caret" ng-if="!exists(accLevel)"></span>
						</a>
						<a href id="accessLevelDropdown" uib-dropdown-toggle ng-if="exists(accLevel)">{{accLevel}}
							<span class="caret" ng-if="exists(accLevel)"></span>
						</a>
						<ul class="dropdown-menu" uib-dropdown-menu aria-labelledby="accessLevelDropdown">
							<li>
								<a ng-click="setUniqueAccessLevels('')">Access Level</a>
							</li>
							<li ng-repeat="aLevel in uniqueAL = (getUniqueAccessLevels())">
								<a ng-click="setUniqueAccessLevels(aLevel)" >{{aLevel}}</a>
							</li>
						</ul>
					</span>
				</th>
				<th class="th-dropdown">
					<span uib-dropdown>
						<a href id="stateDropdown" uib-dropdown-toggle ng-if="!exists(stateName)">State
							<span class="caret" ng-if="!exists(stateName)"></span>
						</a>
						<a href id="stateDropdown" uib-dropdown-toggle ng-if="exists(stateName)">{{stateName}}
							<span class="caret" ng-if="exists(stateName)"></span>
						</a>
						<ul class="dropdown-menu" uib-dropdown-menu aria-labelledby="stateDropdown">
							<li><a ng-click="setUniqueStates('')">State</a></li>
							<li ng-repeat="sName in sNames = (getUniqueStates())">
								<a ng-click="setUniqueStates(sName)" >{{sName}}</a>
							</li>
						</ul>
					</span>
				</th>
				<th class="th-dropdown">
					<span uib-dropdown>
						<a href id="districtDropdown" uib-dropdown-toggle ng-if="!exists(districtName)">District
							<span class="caret" ng-if="!exists(districtName)"></span>
						</a>
						<a href id="districtDropdown" uib-dropdown-toggle ng-if="exists(districtName)">{{districtName}}
							<span class="caret" ng-if="exists(districtName)"></span>
						</a>
						<ul class="dropdown-menu" uib-dropdown-menu aria-labelledby="districtDropdown">
							<li><a ng-click="setUniqueDistricts('')">District</a></li>
							<li ng-repeat="dName in dNames = (getUniqueDistricts())">
								<a ng-click="setUniqueDistricts(dName)" >{{dName}}</a>
							</li>
						</ul>
					</span>
				</th>
				<th class="th-dropdown">
					<span uib-dropdown>
						<a href id="blockDropdown" uib-dropdown-toggle ng-if="!exists(blockName)">Block
							<span class="caret" ng-if="!exists(blockName)"></span>
						</a>
						<a href id="blockDropdown" uib-dropdown-toggle ng-if="exists(blockName)">{{blockName}}
							<span class="caret" ng-if="exists(blockName)"></span>
						</a>
						<ul class="dropdown-menu" uib-dropdown-menu aria-labelledby="blockDropdown">
							<li><a ng-click="setUniqueBlocks('')">Block</a></li>
							<li ng-repeat="bName in bNames = (getUniqueBlocks())">
								<a ng-click="setUniqueBlocks(bName)" >{{bName}}</a>
							</li>
						</ul>
					</span>
				</th>
				<!--<th>Access Level</th>-->
				<!--<th>State</th>-->
				<!--<th>District</th>-->
				<!--<th>Block</th>-->
				<th><a>Edit</a></th>
			</tr>
			<!-- <tr ng-repeat="item in data"> -->
			<tr ng-repeat="item in filterData = (getAllUsers() | filter : search ) | orderBy : sorter : reverse  | limitTo : numPerPage : numPerPage*(currentPageNo-1)">
				<!-- <td class ="{{header}}" ng-repeat="header in headers" ng-if="header != '$$hashKey'">{{item[header]}}</td> -->
				<td>{{item.id}}</td>
				<td>{{item.name}}</td>
				<td>{{item.username}}</td>
				<td>{{item.phoneNumber}}</td>
				<td>{{item.email}}</td>
				<td>{{item.accessType}}</td>
				<td>{{item.accessLevel}}</td>
				<td>{{item.state}}</td>
				<td>{{item.district}}</td>
				<td>{{item.block}}</td>
				<td><span ng-if="item.createdBy"><a ui-sref="userManagement.editUser({ id: '{{item.id}}' })">Edit</a></span></td>
			</tr>
		</table>
<!-- 
		<pagination style="float: right;"
			total-items=filterData.length
			items-per-page="numPerPage"
			current-page="currentPageNo"
			class="pagination-small">
		</pagination> -->

		<div class="block pagination">

		<!-- 	<ul uib-pagination boundary-links="true" total-items="totalItems" items-per-page="itemsPerPage"	ng-model="currentPage" class="pagination-small" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></ul> -->

			<pagination style="float: right;"
				total-items=filterData.length
				items-per-page="numPerPage"
				current-page="currentPageNo"
				class="pagination-small">
			</pagination> 
		</div>
		

	</div>
</div>